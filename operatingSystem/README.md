## Operationg System (운영체제)

### 프로세스와 스레드 차이

#### 프로세스

운영체제로부터 자원을 할당받은 작업의 단위로 실행되어 작업 중인 컴퓨터 프로그램을 의미한다.

#### 스레드

프로세스가 할당받은 자원을 이용하는 실행 흐름의 단위이다.

#### 프로세스와 스레드의 흐름

프로세스가 생성되면 운영체제로부터 총 4개의 영역인 stack, heap, code, data 영역이 생성되고, 하나의 프로세스에는 한 개 이상의 스레드가 생성된다. 이때 스레드는 프로세스로부터 stack 영역만 할당받아 생성되고, heap, code, data 영역은 프로세스 내의 영역들로부터 각각의 스레드와 공유하며 사용한다.

#### 멀티 프로세스 대신 멀티 스레드를 사용하는 이유

1. 자원 효율성 증대

- 멀티 프로세스로 실행되는 작업을 멀티 스레드로 실행하면 프로세스를 생성하여 자원을 할당하는 시스템 콜이 줄어 들어 자원을 효율적으로 관리할 수 있다.
- 스레드는 프로세스 내의 메모리를 공유해 독립적인 프로세스보다 스레드끼리 데이터를 주고받는 것이 간단해지고 시스템 자원 소모가 줄어든다.

2. 처리 비용 감소 및 응답 시간 단축

- 프로세스 간의 통신보다 스레드 간의 통신의 비용이 적게 든다. 이유는 Stack을 제외한 모든 메모리를 공유해서 사용하기 때문이다.
- 프로세스 간의 전환 속도보다 스레드 간의 전환 속도가 더 빠르다. 이유는 context switching 시 스레드는 Stack 영역만 처리하기 때문이다.

### Context Switching

Context Switching이란 멀티 프로세스 환경에서 CPU가 하나의 프로세스를 실행하고 있을 때 인터럽트 요청에 의해 다음 우선 순위의 프로세스가 실행되어야 할 때 기존의 프로세스 상태 또는 레지스터 값을 저장하고 CPU가 다음 프로세스를 수행하도록 새로운 프로세스의 상태 또는 레지스터 값을 교체하는 작업이다.

context란 CPU가 해당 프로세스를 실행하기 위해 필요한 정보들이다.
context는 Process control block에 저장되며, pcb에 저장되는 값들은 프로세스의 상태, 프로그램 카운터, 레지스터, 프로세스의 번호가 저장된다.

컨텍스트 스위칭이 진행될 때 해당 CPU는 아무런 작업을 할 수 없기 때문에 컨텍스트 스위칭이 자주 일어나면 오버헤드가 발생하여 성능이 저하된다.

인터럽트는 CPU가 프로그램을 실행하고 있을 떄 실행 중인 프로그램 밖에서 예외 상황이 발생하여 처리가 필요한 경우 CPU에게 알려 예외 상황을 처리할 수 있도록 하는 것이다.

예외 상황은 입출력 요청, CPU 사용 기간 만료, 자식 프로세스 생성, 인터럽트 처리 대기 시에 발생한다.
